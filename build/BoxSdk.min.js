!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fetch")):"function"==typeof define&&define.amd?define("BoxSdk",["fetch"],t):"object"==typeof exports?exports.BoxSdk=t(require("fetch")):e.BoxSdk=t(e.fetch)}(this,function(e){return function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=o(1),a=(r(s),o(3)),l=r(a),u=o(35),p=r(u),c=function(){function e(){i(this,e),this._BasicBoxClient=l["default"],this._PersistentBoxClient=p["default"]}return n(e,[{key:"BasicBoxClient",get:function(){return this._BasicBoxClient}},{key:"PersistentBoxClient",get:function(){return this._PersistentBoxClient}}]),e}();t["default"]=c,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){function t(e){if(!e.ok){var t=new Error(e.statusText);return e.json().then(function(e){throw t.response=e,t})}return e}function o(e){if(204!==e.status)return e.json()}return e.upload?new Promise(function(t,o){var r=new XMLHttpRequest,i=e.url,n=e.method;r.open(n,i,!0),e.headers&&(e.headers["Content-Type"]&&delete e.headers["Content-Type"],Object.keys(e.headers).forEach(function(t){r.setRequestHeader(t,e.headers[t])})),r.send(e.body),r.onload=function(){if(this.status>=200&&this.status<300)t(JSON.parse(this.response));else{var e=new Error(this.statusText);e.response=JSON.parse(this.response),o(e)}},r.onerror=function(){var e=new Error(this.statusText);e.response=JSON.parse(this.response),o(e)}}):e.chunkedUpload?new Promise(function(t,o){var r=new XMLHttpRequest,i=e.url,n=e.method;r.open(n,i,!0),Object.keys(e.headers).forEach(function(t){r.setRequestHeader(t,e.headers[t])}),r.send(e.body),r.onload=function(){if(this.status>=200&&this.status<300)t(JSON.parse(this.response));else{var e=new Error(this.statusText);e.response=JSON.parse(this.response),o(e)}},r.onerror=function(){var e=new Error(this.statusText);err.response&&(e.response=JSON.parse(this.response)),o(e)}}):fetch(e.url,e).then(t).then(o)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,o(2),e.exports=t["default"]},function(t,o){t.exports=e},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(4),u=r(l),p=o(6),c=r(p),f=function(e){function t(e){return i(this,t),e=e||{},n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),a(t,[{key:"makeRequest",value:function(e,t){return t=t||{},t.url=t.url||""+this._baseApiUrl+e,t.headers=this._handleAuthorization(t),t.params=this._applyFields(t),this._checkForEmptyObjects(t),t=this._formatOptions(t),this._returnsOnlyOptions?(t.upload&&(t.headers["Content-Type"]=void 0,delete t.upload),t):this.httpService.defaults&&t.upload?this._handleAngularFileUpload(this.httpService,t):this.httpService.defaults&&t.chunkedUpload?this._handleAngularFileChunkedUpload(this.httpService,t):this.httpService(t)}},{key:"removeAccessTokenAndRerunRequest",value:function(e,t,o){return o=o||!1,e.setAsNewAccessToken&&(o=e.setAsNewAccessToken,delete e.setAsNewAccessToken),t||(t=this._checkTokenType(e,!0)),e.headers&&e.headers[c["default"].HEADER_AUTHORIZATION]&&delete e.headers[c["default"].HEADER_AUTHORIZATION],this.removeAccessToken(),o&&(this.removeAccessToken(),this._accessToken=this._checkTokenType(t),this._hasStoredAccessToken=!0),e.headers=this._handleAuthorization(e,t),e=this._formatOptions(e),BoxHttp(e)}},{key:"removeAccessToken",value:function(){this._accessToken=null,this._hasStoredAccessToken=!1}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),a=o(5),l=r(a),u=o(14),p=r(u),c=o(26),f=r(c),d=o(27),_=r(d),h=o(28),y=r(h),g=o(29),b=r(g),m=o(30),v=r(m),O=o(31),k=r(O),T=o(32),E=r(T),P=o(33),S=r(P),j=o(34),I=r(j),A=o(6),w=r(A),R=o(1),M=r(R),L=function(){function e(t){i(this,e),this._folders=new l["default"](this),this._files=new p["default"](this),this._webLinks=new f["default"](this),this._collaborations=new _["default"](this),this._collections=new y["default"](this),this._comments=new b["default"](this),this._groups=new v["default"](this),this._metadata=new k["default"](this),this._search=new E["default"](this),this._tasks=new S["default"](this),this._users=new I["default"](this),this._baseApiUrl=t.baseUrl||"https://api.box.com/2.0",this._returnsOnlyOptions=!(!t.hasOwnProperty("noRequestMode")||t.noRequestMode!==!0),this._skipValidation=!(!t.hasOwnProperty("skipValidation")||t.skipValidation!==!0),this._simpleMode=!(!t.hasOwnProperty("simpleMode")||t.simpleMode!==!0),this._accessToken=this._checkTokenType(t),this._hasStoredAccessToken=!!this._accessToken,this.httpService=t.httpService||M["default"],this.Promise=t.Promise||Promise}return s(e,[{key:"_checkTokenType",value:function(e,t){if(t=t||!1,e&&"string"==typeof e)return e;var o=void 0;return e&&"object"===("undefined"==typeof e?"undefined":n(e))&&(e.hasOwnProperty("accessToken")&&(o=e.accessToken,t&&delete e.accessToken),e.hasOwnProperty("access_token")&&(o=e.access_token,t&&delete e.access_token)),o}},{key:"_handleAuthorization",value:function(e,t){if(t)return this._constructHeaders(e,t);if(e&&e.accessToken||e.access_token){var o=e.accessToken||e.access_token;return e.accessToken?delete e.accessToken:delete e.access_token,this._constructHeaders(e,o)}if(this._hasStoredAccessToken)return this._constructHeaders(e,this._accessToken);var r=this._checkTokenType(e,!0);return this._constructHeaders(e,r)}},{key:"_constructHeaders",value:function(e,t){var o={};return t&&(o[w["default"].HEADER_AUTHORIZATION]=this._constructAuthorizationHeader(t)),e.headers&&Object.assign(o,e.headers),o}},{key:"_constructAuthorizationHeader",value:function(e){return""+w["default"].HEADER_AUTHORIZATION_PREFIX+e}},{key:"_checkForEmptyObjects",value:function(e){var t=this;Object.keys(e).map(function(o){"body"!==o&&"upload"!==o&&"chunkedUpload"!==o&&t._isEmpty(e[o])&&delete e[o]})}},{key:"_isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"_applyFields",value:function(e){return e.params=e.params||{},e.fields&&(e.params.fields=e.fields,delete e.fields),e.params}},{key:"_formatOptions",value:function(e){if(e.chunkedUpload)return e;var t={},o=e.url;return e.params&&(o+="?",o+=Object.keys(e.params).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e.params[t])}).join("&")),t.url=o,t.headers=e.headers,e.upload?(e.headers["Content-Type"]="multipart/form-data",e.mode="cors",e):(e.body&&"object"===n(e.body)&&!e.upload&&(t.body=JSON.stringify(e.body),t.headers["Content-Type"]||(t.headers["Content-Type"]="application/json;charset=UTF-8")),t.method=e.method,t.data=e.body,t.mode="cors",t)}},{key:"_handleAngularFileUpload",value:function(e,t){return t.headers["Content-Type"]=void 0,e.post(t.url,t.body,{headers:t.headers})}},{key:"_handleAngularFileChunkedUpload",value:function(e,t){return e.put(t.url,t.body,{headers:t.headers})}},{key:"folders",get:function(){return this._folders}},{key:"files",get:function(){return this._files}},{key:"webLinks",get:function(){return this._webLinks}},{key:"collaborations",get:function(){return this._collaborations}},{key:"collections",get:function(){return this._collections}},{key:"comments",get:function(){return this._comments}},{key:"groups",get:function(){return this._groups}},{key:"metadata",get:function(){return this._metadata}},{key:"search",get:function(){return this._search}},{key:"tasks",get:function(){return this._tasks}},{key:"users",get:function(){return this._users}}]),e}();t["default"]=L,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function k(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:k(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(6),p=r(u),c=o(7),f=r(c),d=o(8),_=r(d),h=o(9),y=r(h),g=o(10),b=r(g),m="/folders",v={NAME:"name",PARENT:"parent",ID:"parent.id",DESCRIPTION:"description",SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PASSWORD:"shared_link.password",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview",FOLDER_UPLOAD_EMAIL:"folder_upload_email",FOLDER_UPLOAD_EMAIL_ACCESS:"folder_upload_email.access",OWNED_BY:"owned_by",OWNED_BY_ID:"owned_by.id",SYNC_STATE:"sync_state",TAGS:"tags"},O=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v))}return s(t,e),a(t,[{key:"_getFolder",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.folder?(r||(0,f["default"])(e.folder,o),i||(0,y["default"])(e.folder,this.FLATTENED_VALUES),e.body=(0,_["default"])(e.folder,this.ALL_VALUES,i),delete e.folder):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=m+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getItems",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=m+"/"+o+"/items";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getCollaborations",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=m+"/"+o+"/collaborations";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTrashedItems",value:function(e){e=e||{};var t=m+"/trash/items";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}},{key:"getTrashedFolder",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=m+"/"+o+"/trash";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[v.PARENT,v.ID,v.NAME],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,o,r,i)}var n=""+m;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"update",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,[],r,i)}var n=m+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"copy",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,[REQUIRED_VALUES.PARENT,REQUIRED_VALUES.ID],r,i),e.newName&&(e.body.name=e.newName,delete e.newName)}var n=m+"/"+o+"/copy";return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"createSharedLink",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_createSharedLink",this).call(this,e,o,m,this.FLATTENED_VALUES)}},{key:"updateCollections",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);e.collections&&(e.body.collections=e.collections,delete e.collections);var r=m+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"restore",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,[],r,i)}var n=m+"/"+o;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{},e.params=e.params||{},e.params.recursive=e.params.recursive||!0;var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=m+"/"+o;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}},{key:"permanentlyDelete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=m+"/"+o+"/trash";return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}}]),t}(b["default"]);t["default"]=O,e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={HEADER_AUTHORIZATION:"Authorization",HEADER_AUTHORIZATION_PREFIX:"Bearer ",HTTP_VERBS:{GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",OPTIONS:"OPTIONS"},MODES:{SKIP_VALIDATION:"skipValidation",IGNORE_MODEL_VALUES:"ignoreModelValues"},FOLDER:"folder",FOLDER_ID:"folderId",FILE:"file",FILE_ID:"fileId",VERSION:"version",VERSION_ID:"versionId",COMMENT:"comment",COMMENT_ID:"commentId",BOX_TOKEN_STORAGE_KEY:"box_token"},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(t=t||[],0!==t.length){var o=e;t.map(function(t){if(t.indexOf(".")!==-1){for(var r=t.split("."),i=0,n=r.length;i<n;i++){var s=r[i];o.hasOwnProperty(s)&&(o=o[s])}if(!o)throw new Error("A(n) "+t+" field is required for this API call")}else if(!e[t])throw new Error("A(n) "+t+" field is required for this API call")})}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,o){return o=o||!1,t=t||[],o?(Object.keys(e).map(function(t){"body"!==t&&(e.body[t]=e[t],delete e[t])}),e.body):0===t.length&&o===!1?{}:(e.body=e.body||{},Object.keys(e).map(function(o){t.indexOf(o)!==-1&&"body"!==o&&(e.body[o]=e[o],delete e[o])}),e.body)},e.exports=t["default"]},function(e,t){"use strict";function o(e,t){t=t||[],Object.keys(e).map(function(i){if(t.indexOf(i)===-1){"object"===r(e[i])&&o(e[i],t);var n=i.split(/(?=[A-Z])/g);if(n.length>1){for(var s=[],a=1;a<n.length;a++)s.push(n[a].toLowerCase());n.length>0&&s.unshift(n[0]);var l=s.join("_");t.indexOf(l)!==-1&&(e[l]=e[i],delete e[i])}}})}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]=o,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=o(6),a=r(s),l=o(11),u=r(l),p=o(12),c=r(p),f=o(13),d=r(f),_=o(9),h=r(_),y=o(7),g=r(y),b=o(8),m=r(b),v={SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview"},O=function(){function e(t,o){i(this,e),this.client=t,this.ALL_VALUES=o?(0,c["default"])(o):null,this.FLATTENED_VALUES=this.ALL_VALUES?(0,d["default"])(this.ALL_VALUES):null}return n(e,[{key:"_getModel",value:function(e,t,o,r){if(e.body)o||(0,g["default"])(e.body,t),r||(0,h["default"])(e.body,this.FLATTENED_VALUES);else{if(!e){t=t||this.ALL_VALUES;var i=t.join(", ");throw new Error("Please select from the following fields when making this API call: "+i)}o||(0,g["default"])(e,t),r||(0,h["default"])(e,this.FLATTENED_VALUES),e.body=(0,m["default"])(e,this.ALL_VALUES,r)}}},{key:"_objectifyString",value:function(e){if("string"==typeof e){var t=e;e={id:t}}return e}},{key:"_getId",value:function(e){var t="";return e.id?(t=e.id,delete e.id):"string"==typeof e&&(t=e,e={}),t}},{key:"_getFolderId",value:function(e){var t=this._getId(e);return e.folderId||e.folder_id?(t=e.folderId||e.folder_id,e.folderId?delete e.folderId:delete e.folder_id):e.folder&&e.folder.id&&(t=e.folder.id),this._testForMissingId(t,a["default"].FOLDER,a["default"].FOLDER_ID),t}},{key:"_getFileId",value:function(e){var t=this._getId(e);return e.fileId||e.file_id?(t=e.fileId||e.file_id,e.fileId?delete e.fileId:delete e.file_id):e.file&&e.file.id&&(t=e.file.id),this._testForMissingId(t,a["default"].FILE,a["default"].FILE_ID),t}},{key:"_getScope",value:function(e){var t="enterprise";return e.scope&&""!==e.scope&&(t=e.scope,delete e.scope),t}},{key:"_getTemplateKey",value:function(e){var t="";return e.template&&""!==e.template?(t=""!==e.template.key?e.template.key:e.template,delete e.template):(e.templateKey||e.template_key)&&(t=e.templateKey||e.template_key,e.templateKey?delete e.templateKey:delete e.template_key),t}},{key:"_testForMissingId",value:function(e,t,o){if(t=t||"unknown",o=o||"unknown",""===e)throw new Error("A(n) "+t+" field is required for this API call. Please provide an object with a key formatted in this style: "+o)}},{key:"_setSkipValidation",value:function(e){return(0,u["default"])(e,a["default"].MODES.SKIP_VALIDATION)||!1}},{key:"_setIgnoreModelValues",value:function(e){return(0,u["default"])(e,a["default"].MODES.IGNORE_MODEL_VALUES)||!1}},{key:"_createSharedLink",value:function(e,t,o,r){if(e=e||{},e.body=e.body||{},e.body.shared_link=e.body.shared_link||{},!this.client._simpleMode){var i=this._setSkipValidation(e),n=this._setIgnoreModelValues(e);n||(0,h["default"])(e,r),i||e[v.SHARED_LINK]&&(e.body[v.SHARED_LINK]=e[v.SHARED_LINK],delete e[v.SHARED_LINK])}var s=o+"/"+t;return e.method=a["default"].HTTP_VERBS.PUT,this.client.makeRequest(s,e)}}]),e}();t["default"]=O,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(12),n=r(i),s=o(6),a=r(s),l=(0,n["default"])(a["default"].MODES);t["default"]=function(e,t){var o=void 0;return l.indexOf(t)!==-1&&(o=e[t],delete e[t]),o},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return Object.keys(e).map(function(t){return e[t]})},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e=Array.prototype.concat.apply([],e.map(function(t){if(t.indexOf(".")!==-1){var o=t.split(".");return o.filter(function(t){return e.indexOf(t)===-1})}return t}))},e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function F(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:F(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(15),p=r(u),c=o(6),f=r(c),d=o(7),_=r(d),h=o(8),y=r(h),g=o(9),b=r(g),m=o(10),v=r(m),O=o(16),k=r(O),T=o(22),E=r(T),P=o(25),S=r(P),j="/files",I="lock",A="https://upload.box.com/api/2.0",w={NAME:"name",PARENT:"parent",ID:"parent.id",DESCRIPTION:"description",SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview",FOLDER_UPLOAD_EMAIL:"folder_upload_email",FOLDER_UPLOAD_EMAIL_ACCESS:"folder_upload_email.access",OWNED_BY:"owned_by",OWNED_BY_ID:"owned_by.id",SYNC_STATE:"sync_state",TAGS:"tags",SIZE:"size"},R={MIN_HEIGHT:"min_height",MAX_HEIGHT:"max_height",MIN_WIDTH:"min_width",MAX_WIDTH:"max_width"},M=Object.keys(R).map(function(e){return R[e]}),L=5e7,V=function(e){function t(e){i(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,w));return o.UPLOAD_PATH=A,o}return s(t,e),a(t,[{key:"_getVersionId",value:function(e){var o=void 0;return(e.versionId||e.version_id)&&(o=e.versionId||e.version_id,e.versionId?delete e.versionId:e.version_id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o,f["default"].VERSION,f["default"].VERSION_ID),o}},{key:"_getFile",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.file?(r||(0,_["default"])(e.file,o),i||(0,b["default"])(e.file,this.FLATTENED_VALUES),e.body=(0,y["default"])(e.file,this.ALL_VALUES,i),delete e.file):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=j+"/"+o;return e.method=f["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getDownloadUrl",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.params=e.params||{},e.fields||e.params.fields?(e.params.fields=e.params.fields?e.params.fields:e.fields,e.params.fields=e.params.fields.concat(",download_url")):e.params={fields:"download_url"};var r=j+"/"+o;return e.method=f["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"chunkedUpload",value:function(e){if(e=e||{},!e.file)throw new Error("Must make this call with an HTML5 File object.");if(e.file&&e.file.size<L)throw new Error("File size less than minimum allowed for this API: 50000000");e.name=e.name||e.file.name;var t=new p["default"](this,e.name,e.file,e.parentFolder,e.listeners);return t.startSession()}},{key:"upload",value:function(e){return e=e||{},e.url=e.url||A+"/files/content",e.method=f["default"].HTTP_VERBS.POST,e.upload=!0,this.client.makeRequest(null,e)}},{key:"uploadNewFileVersion",value:function(e){if(!(0,S["default"])())throw new Error("Form Data not supported. The uploadNewFileVersion requires Form Data in the browser.");e=e||{};var t=e.body.get("id")||e.body.get("fileId")||e.body.get("file_id");return e.url=e.url||A+"/files/"+t+"/content",e.method=f["default"].HTTP_VERBS.POST,e.upload=!0,this.client.makeRequest(null,e)}},{key:"uploadWithPreflightAndMd5",value:function(e){var t=this;e=e||{};var o=e.file,r=e.body,i={name:e.name,parent:e.parent,size:e.file.size},n=JSON.parse(JSON.stringify(e));return this.preflightCheck(i).then(function(e){e.upload_url&&(n.url=e.upload_url)}).then(function(){if(void 0===o)throw new Error("Couldn't access file...");return(0,k["default"])(o)}).then(function(e){return n.headers=n.headers||{},n.body=r,delete n.file,n.headers["Content-MD5"]=e,t.upload(n)})}},{key:"uploadNewFileVersionWithPreflighAndMd5",value:function(e){var t=this;if(!(0,S["default"])())throw new Error("Form Data not supported. The uploadNewFileVersion requires Form Data in the browser.");e=e||{};var o=e.file,r=e.body,i=JSON.parse(JSON.stringify(e));return e.fileId=e.body.get("id")||e.body.get("fileId")||e.body.get("file_id"),this.preflightCheckNewFileVersion(e).then(function(e){e.upload_url&&(i.url=e.upload_url)}).then(function(){if(void 0===o)throw new Error("Couldn't access file...");return(0,k["default"])(o)}).then(function(e){return i.headers=i.headers||{},i.body=r,delete i.file,i.headers["Content-MD5"]=e,t.uploadNewFileVersion(i)})}},{key:"preflightCheck",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[w.SIZE,w.NAME],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,o,r,i)}var n=j+"/content";return e.method=f["default"].HTTP_VERBS.OPTIONS,this.client.makeRequest(n,e)}},{key:"preflightCheckNewFileVersion",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!this.client._simpleMode){var r=[w.SIZE,w.NAME],i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,r,i,n)}var s=j+"/"+o+"/content";return e.method=f["default"].HTTP_VERBS.OPTIONS,this.client.makeRequest(s,e)}},{key:"update",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.url=e.url||A+"/"+o+"/content",this.upload(e)}},{key:"getComments",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=j+"/"+o+"/comments";return e.method=f["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTasks",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=j+"/"+o+"/tasks";return e.method=f["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getEmbedLink",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.params=e.params||{},e.fields||e.params.fields?(e.fields&&(e.params.fields=e.fields,delete e.fields),e.params.fields=e.params.fields.concat(",expiring_embed_link")):e.params.fields="expiring_embed_link";var r=j+"/"+o;return e.method=f["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getVersions",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=j+"/"+o+"/versions";return e.method=f["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getThumbnail",value:function(e){e=e||{},e.extension=e.extension||".png",e.params=e.params||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);Object.keys(e).map(function(t){M.indexOf(t)!==-1&&(e.params[t]=e[t],delete e[t])});var r=j+"/"+o+"/thumbnail"+e.extension;return delete e.extension,e.method=f["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTrashedFile",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};
var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=j+"/"+o+"/trash";return e.method=f["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"createSharedLink",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_createSharedLink",this).call(this,e,o,j,this.FLATTENED_VALUES)}},{key:"promoteVersion",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!e.body.id){var r=this._getVersionId(e);e.body.id=r}e.body.type="file_version";var i=j+"/"+o+"/versions/current";return e.method=f["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"copy",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!e.body.parent&&!e.body.parent.id)if(e.body.parent={},e.id)e.body.parent.id=e.id,delete e.id;else{if(!e.parentId)throw new Error("A parentId or id is required for this API call.");e.body.parent.id=e.parentId,delete e.parentId}e.name?(e.body.name=e.name,delete e.name):e.newName&&(e.body.name=e.newName,delete e.newName);var r=j+"/"+o+"/copy";return e.method=f["default"].HTTP_VERBS.POST,this.client.makeRequest(r,e)}},{key:"updateInfo",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,[],r,i)}var n=j+"/"+o;return e.method=f["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"lock",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e[I]?(e.body[I]=e[I],e.body[I].type=I,delete e[I]):e.body.lock={type:I};var r=j+"/"+o;return e.method=f["default"].HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"unlock",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e[I]&&delete e[I],e.body[I]=null;var r=j+"/"+o;return e.method=f["default"].HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"restore",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.parent&&(e.body=e.body||{},e.body.parent=e.parent,delete e.parent),e.name&&(e.body=e.body||{},e.body.name=e.name,delete e.name);var r=j+"/"+o;return e.method=f["default"].HTTP_VERBS.POST,this.client.makeRequest(r,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=j+"/"+o;return e.method=f["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}},{key:"deleteVersion",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=this._getVersionId(e),i=j+"/"+o+"/versions/"+r;return e.method=f["default"].HTTP_VERBS.DELETE,this.client.makeRequest(i,e)}},{key:"permanentlyDelete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=j+"/"+o+"/trash";return e.method=f["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}},{key:"createSHA1Hash",value:function(e){return(0,E["default"])(e)}}]),t}(v["default"]);t["default"]=V,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=o(6),a=r(s),l="boxChunkedUploadProgress",u="boxChunkedUploadFailure",p="boxChunkedUploadSuccess",c="boxChunkedUploadStart",f="boxChunkedUploadFileCommitted",d="boxChunkedUploadCompleted",_=function(){function e(t,o,r,n,s){i(this,e),this.filesManager=t,this.client=t.client,this.file=r,this.fileName=o,this.parts=[],this.parentFolder=n,this.session={id:"",endpoints:{listParts:"",commit:"",uploadPart:"",status:"",abort:""},expiresAt:"",partSize:0,totalParts:0},this.getFailureNotification=s.getFailureNotification||null,this.getSuccessNotification=s.getSuccessNotification||null,this.getStartNotification=s.getStartNotification||null,this.getFileCommitNotification=s.getFileCommitNotification||null,this.getCompletedNotification=s.getCompletedNotification||null,this.handleProgressUpdates=s.handleProgressUpdates||null,this.progress={isComplete:!1,didStart:!1,didFail:!1,didSucceed:!1,didFileCommit:!1,didSessionStart:!1,percentageProcessed:0,percentageUploaded:0,session:{}},this.retry=0}return n(e,[{key:"addListeners",value:function(){null!==this.getFailureNotification&&addEventListener(u,this.getFailureNotification),null!==this.getSuccessNotification&&addEventListener(p,this.getSuccessNotification),null!==this.getStartNotification&&addEventListener(c,this.getStartNotification),null!==this.getFileCommitNotification&&addEventListener(f,this.getFileCommitNotification),null!==this.getCompletedNotification&&addEventListener(d,this.getCompletedNotification),null!==this.handleProgressUpdates&&addEventListener(l,this.handleProgressUpdates)}},{key:"removeListeners",value:function(){null!==this.getFailureNotification&&removeEventListener(u,this.getFailureNotification),null!==this.getSuccessNotification&&removeEventListener(p,this.getSuccessNotification),null!==this.getStartNotification&&removeEventListener(c,this.getStartNotification),null!==this.getFileCommitNotification&&removeEventListener(f,this.getFileCommitNotification),null!==this.getCompletedNotification&&removeEventListener(d,this.getCompletedNotification),null!==this.handleProgressUpdates&&removeEventListener(l,this.handleProgressUpdates)}},{key:"fireEvent",value:function(e,t){var o=new CustomEvent(t,{detail:{progress:e},bubbles:!0,cancelable:!0});dispatchEvent(o)}},{key:"startSession",value:function(){this.addListeners(),this.progress.didStart=!0,null!==this.getStartNotification&&this.fireEvent(this.progress,c);var e={},t=this;return e.method=a["default"].HTTP_VERBS.POST,e.url=this.filesManager.UPLOAD_PATH+"/files/upload_sessions",e.body={folder_id:this.parentFolder.id,file_size:this.file.size,file_name:this.fileName},this.client.makeRequest(null,e).then(function(e){return e.data&&(e=e.data),t.session.id=e.id,t.session.expiresAt=e.session_expires_at,t.session.partSize=e.part_size,t.session.totalParts=e.total_parts,t.session.endpoints.listParts=e.session_endpoints.list_parts,t.session.endpoints.commit=e.session_endpoints.commit,t.session.endpoints.uploadPart=e.session_endpoints.upload_part,t.session.endpoints.status=e.session_endpoints.status,t.session.endpoints.abort=e.session_endpoints.abort,t.progress.session=t.session,t.makeChunks(),t.processChunks()}).then(function(e){return t.commitUpload()}).then(function(e){return null!==t.getFileCommitNotification&&(t.progress.didFileCommit=!0,t.fireEvent(t.progress,f)),null!==t.getCompletedNotification&&(t.progress.didSucceed=!0,t.progress.isComplete=!0,t.fireEvent(t.progress,d)),null!==t.getSuccessNotification&&t.fireEvent(t.progress,p),e})["catch"](function(e){throw null!==t.getCompletedNotification&&(t.progress.didFail=!0,t.progress.isComplete=!0,t.fireEvent(t.progress,d)),null!==t.getFailureNotification&&t.fireEvent(t.progress,u),e})}},{key:"makeChunks",value:function(){for(var e=this.file.size,t=0,o=this,r=void 0;t<e;){var i=t+o.session.partSize-1;i>e-1&&(i=e-1),r=o.file.slice(t,t+o.session.partSize),o.parts.push({part:r,contentRange:"bytes "+t+"-"+i+"/"+o.file.size,digest:""}),t+=o.session.partSize}}},{key:"processChunks",value:function(){var e=this,t=[],o=0,r=0;return e.retry++,this.parts.forEach(function(i){var n=i.part;t.push(e.filesManager.createSHA1Hash(n).then(function(t){r++,null!==e.handleProgressUpdates&&(e.progress.percentageProcessed=(r/e.session.totalParts).toFixed(2),e.fireEvent(e.progress,l)),i.digest=t;var o={};return o.method=a["default"].HTTP_VERBS.PUT,o.url=e.session.endpoints.uploadPart,o.headers={Digest:"sha="+t,"Content-Range":i.contentRange,"Content-Type":"application/octet-stream"},o.body=i.part,o.chunkedUpload=!0,e.client.makeRequest(null,o)}).then(function(t){o++,null!==e.handleProgressUpdates&&(e.progress.percentageUploaded=(o/e.session.totalParts).toFixed(2),e.fireEvent(e.progress,l)),t.data&&(t=t.data),i.response=t}))}),Promise.all(t)["catch"](function(t){if(!t||!t.status||416===t.status)throw t;for(;e.retry<3;)e.processChunks()})}},{key:"commitUpload",value:function(){var e=this,t=[];return e.filesManager.createSHA1Hash(e.file).then(function(o){e.parts.forEach(function(e){t.push(e.response.part)});var r={};return r.method=a["default"].HTTP_VERBS.POST,r.url=e.session.endpoints.commit,r.headers={Digest:"sha="+o},r.body={parts:t},e.client.makeRequest(null,r)}).then(function(e){return e})}}]),e}();t["default"]=_,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(17),n=r(i),s=o(18),a=(r(s),o(19)),l=(r(a),o(20)),u=r(l),p=o(21),c=r(p);t["default"]=function(e){return new Promise(function(t,o){(0,c["default"])()||o(new Error("FileReader isn't usable in this browser.")),(0,u["default"])(e)||o(new Error("File object not detected."));try{var r=n["default"].algo.SHA1.create(),i=0,s=1048576,a=void 0,l=new FileReader;l.readAsArrayBuffer(e.slice(i,i+s)),l.onload=function(o){var u=n["default"].lib.WordArray.create(o.target.result);if(r.update(u),i+=s,i<e.size)a=e.slice(i,i+s),l.readAsArrayBuffer(a);else{var p=r.finalize(),c=p.toString(n["default"].enc.Hex);t(c)}}}catch(p){o(p)}})},e.exports=t["default"]},function(e,t,o){!function(o,r){e.exports=t=r()}(this,function(){var e=e||function(e,t){var o=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),r={},i=r.lib={},n=i.Base=function(){return{extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=i.WordArray=n.extend({init:function(e,o){e=this.words=e||[],o!=t?this.sigBytes=o:this.sigBytes=4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,o=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var n=0;n<i;n++){var s=o[n>>>2]>>>24-n%4*8&255;t[r+n>>>2]|=s<<24-(r+n)%4*8}else for(var n=0;n<i;n+=4)t[r+n>>>2]=o[n>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,r=[],i=function(t){var t=t,o=987654321,r=4294967295;return function(){o=36969*(65535&o)+(o>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var i=(o<<16)+t&r;return i/=4294967296,i+=.5,i*(e.random()>.5?1:-1)}},n=0;n<t;n+=4){var a=i(4294967296*(o||e.random()));o=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},l=a.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,r=[],i=0;i<o;i++){var n=t[i>>>2]>>>24-i%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,o=[],r=0;r<t;r+=2)o[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(o,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,r=[],i=0;i<o;i++){var n=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(n))}return r.join("")},parse:function(e){for(var t=e.length,o=[],r=0;r<t;r++)o[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(o,t)}},p=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},c=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,r=o.words,i=o.sigBytes,n=this.blockSize,a=4*n,l=i/a;l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0);var u=l*n,p=e.min(4*u,i);if(u){for(var c=0;c<u;c+=n)this._doProcessBlock(r,c);var f=r.splice(0,u);o.sigBytes-=p}return new s.init(f,p)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(i.Hasher=c.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new f.HMAC.init(e,o).finalize(t)}}}),r.algo={});return r}(Math);return e})},function(e,t,o){!function(r,i){e.exports=t=i(o(17))}(this,function(e){return function(){var t=e,o=t.lib,r=o.WordArray,i=o.Hasher,n=t.algo,s=[],a=n.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=this._hash.words,r=o[0],i=o[1],n=o[2],a=o[3],l=o[4],u=0;u<80;u++){if(u<16)s[u]=0|e[t+u];else{var p=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=p<<1|p>>>31}var c=(r<<5|r>>>27)+l+s[u];c+=u<20?(i&n|~i&a)+1518500249:u<40?(i^n^a)+1859775393:u<60?(i&n|i&a|n&a)-1894007588:(i^n^a)-899497514,l=a,a=n,n=i<<30|i>>>2,i=r,r=c}o[0]=o[0]+r|0,o[1]=o[1]+i|0,o[2]=o[2]+n|0,o[3]=o[3]+a|0,o[4]=o[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(o/4294967296),t[(r+64>>>9<<4)+15]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(a),t.HmacSHA1=i._createHmacHelper(a)}(),e.SHA1})},function(e,t,o){!function(r,i){e.exports=t=i(o(17))}(this,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,o=t.lib,r=o.WordArray,i=r.init,n=r.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,o=[],r=0;r<t;r++)o[r>>>2]|=e[r]<<24-r%4*8;i.call(this,o,t)}else i.apply(this,arguments)};n.prototype=r}}(),e.lib.WordArray})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e.constructor===File&&"string"==typeof e.name},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return!!(window&&window.FileReader||FileReader)},e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(17),n=r(i),s=o(18),a=(r(s),o(19)),l=(r(a),o(23)),u=(r(l),o(24)),p=(r(u),o(20)),c=r(p),f=o(21),d=r(f);t["default"]=function(e){return new Promise(function(t,o){if((0,d["default"])()||o(new Error("FileReader isn't usable in this browser.")),(0,c["default"])(e))try{var r=n["default"].algo.SHA1.create(),i=0,s=e.multiplier||1,a=1048576*s,l=void 0,u=new FileReader;u.readAsArrayBuffer(e.slice(i,i+a)),u.onload=function(o){var s=n["default"].lib.WordArray.create(o.target.result);if(r.update(s),i+=a,i<e.size)l=e.slice(i,i+a),u.readAsArrayBuffer(l);else{var p=r.finalize(),c=p.toString(n["default"].enc.Base64);t(c)}}}catch(p){o(p)}else try{var f=n["default"].algo.SHA1.create(),_=new FileReader;_.readAsArrayBuffer(e),_.onload=function(e){var o=n["default"].lib.WordArray.create(e.target.result);f.update(o);var r=f.finalize(),i=r.toString(n["default"].enc.Base64);t(i)}}catch(p){o(p)}})},e.exports=t["default"]},function(e,t,o){!function(r,i){e.exports=t=i(o(17))}(this,function(e){return function(){function t(e,t,o){for(var r=[],n=0,s=0;s<t;s++)if(s%4){var a=o[e.charCodeAt(s-1)]<<s%4*2,l=o[e.charCodeAt(s)]>>>6-s%4*2;r[n>>>2]|=(a|l)<<24-n%4*8,n++}return i.create(r,n)}var o=e,r=o.lib,i=r.WordArray,n=o.enc;n.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,r=this._map;e.clamp();for(var i=[],n=0;n<o;n+=3)for(var s=t[n>>>2]>>>24-n%4*8&255,a=t[n+1>>>2]>>>24-(n+1)%4*8&255,l=t[n+2>>>2]>>>24-(n+2)%4*8&255,u=s<<16|a<<8|l,p=0;p<4&&n+.75*p<o;p++)i.push(r.charAt(u>>>6*(3-p)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var o=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var n=0;n<r.length;n++)i[r.charCodeAt(n)]=n}var s=r.charAt(64);if(s){var a=e.indexOf(s);a!==-1&&(o=a)}return t(e,o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e.constructor===Blob&&e instanceof Blob},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return!!(window&&window.FormData||FormData)},e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function k(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:k(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(6),p=r(u),c=o(7),f=r(c),d=o(8),_=r(d),h=o(9),y=r(h),g=o(10),b=r(g),m="/web_links",v={URL:"url",PARENT:"parent",ID:"parent.id",NAME:"name",DESCRIPTION:"description"},O=function(e){function t(e){i(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,v));return o.client=e,o}return s(t,e),a(t,[{key:"_getWebLinkId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.webLink&&(e.web_link=e.webLink,delete e.webLink),e.web_link&&e.web_link.id?o=e.web_link.id:(e.webLinkId||e.web_link_id)&&(o=e.webLinkId||e.web_link_id,e.webLinkId?delete e.webLinkId:delete e.web_link_id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getWebLink",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.webLink&&(e.web_link=e.webLink,delete e.webLink),e.web_link?(r||(0,f["default"])(e.webLink,o),i||(0,y["default"])(e.webLink,this.FLATTENED_VALUES),e.body=(0,_["default"])(e.webLink,this.ALL_VALUES),delete e.web_link):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getWebLinkId(e),r=m+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var t=[ALL_VALUES.URL,ALL_VALUES.PARENT,ALL_VALUES.ID],o=InvestigateModes(e,p["default"].MODES.SKIP_VALIDATION)||!1,r=InvestigateModes(e,p["default"].MODES.IGNORE_MODEL_VALUES)||!1;this.client._returnsOnlyOptions||this._getWebLink(e,t,o,r)}var i=""+m;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"update",value:function(e){e=e||{};var t=this._getWebLinkId(e);if(!this.client._simpleMode){var o=InvestigateModes(e,p["default"].MODES.SKIP_VALIDATION)||!1,r=InvestigateModes(e,p["default"].MODES.IGNORE_MODEL_VALUES)||!1;this._getWebLink(e,[],o,r)}var i=m+"/"+t;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getWebLinkId(e),o=m+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(b["default"]);t["default"]=O,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function y(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(6),p=r(u),c=o(10),f=r(c),d="/collaborations",_={NOTIFY:"notify",ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",ACCESSIBLE_BY:"accessible_by",ACCESSIBLE_BY_ID:"accessible_by.id",ACCESSIBLE_BY_TYPE:"accessible_by.type",ACCESSIBLE_BY_LOGIN:"accessible_by.login",ROLE:"role"},h=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_))}return s(t,e),a(t,[{key:"_getCollaborationId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.collaborationId||e.collaboration_id?(o=e.collaborationId||e.collaboration_id,e.collaborationId?delete e.collaborationId:delete e.collaboration_id):e.collaboration&&e.collaboration.id&&(o=e.collaboration.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getCollaboration",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.collaboration?(r||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"VerifyRequiredValues",this).call(this,e.collaboration,o),i||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"NormalizeObjectKeys",this).call(this,e.collaboration,this.FLATTENED_VALUES),e.body=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"CreateRequestBody",this).call(this,e.comment,this.ALL_VALUES,i),delete e.collaboration):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCollaborationId(e),r=d+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[_.ITEM,_.ITEM_ID,_.ITEM_TYPE,_.ACCESSIBLE_BY,_.ROLE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getCollaboration(e,o,r,i)}var n=""+d;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"update",value:function(e){e=e||{};var o=this._getCollaborationId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getCollaboration(e,[],r,i)}var n=d+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getCollaborationId(e),o=d+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(f["default"]);t["default"]=h,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function y(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(6),p=r(u),c=o(10),f=r(c),d="/collections",_={},h=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_))}return s(t,e),a(t,[{key:"_getCollectionId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.collectionId||e.collection_id?(o=e.collectionId||e.collection_id,e.collectionId?delete e.collectionId:delete e.collection_id):e.collection&&e.collection.id&&(o=e.collection.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCollectionId(e),r=d+"/"+o+"/items";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getAll",value:function(e){e=e||{};var t=""+d;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}}]),t}(f["default"]);t["default"]=h,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function y(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(6),p=r(u),c=o(10),f=r(c),d="/comments",_={ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",TAGGED_MESSAGE:"tagged_message",MESSAGE:"message"},h=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_))}return s(t,e),a(t,[{key:"_getCommentId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.commentId||e.comment_id?(o=e.commentId||e.comment_id,e.commentId?delete e.commentId:delete e.comment_id):e.comment&&e.comment.id&&(o=e.comment.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o,p["default"].COMMENT,p["default"].COMMENT_ID),o}},{key:"_getComment",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.comment?(r||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"VerifyRequiredValues",this).call(this,e.comment,o),i||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"NormalizeObjectKeys",this).call(this,e.comment,this.FLATTENED_VALUES),e.body=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"CreateRequestBody",this).call(this,e.comment,this.ALL_VALUES,i),delete e.comment):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCommentId(e),r=d+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[_.ITEM,_.ITEM_ID,_.ITEM_TYPE,_.MESSAGE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getComment(e,o,r,i)}var n=""+d;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"update",value:function(e){e=e||{};var o=this._getCommentId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getComment(e,[_.MESSAGE],r,i)}var n=d+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};
var o=this._getCommentId(e),r=d+"/"+o;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}}]),t}(f["default"]);t["default"]=h,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function O(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:O(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(6),p=r(u),c=o(7),f=r(c),d=o(9),_=r(d),h=o(10),y=r(h),g="/groups",b="/group_memberships",m={NAME:"name",PROVENANCE:"provenance",EXTERNAL_SYNC_IDENTIFIER:"external_sync_identifier",DESCRIPTION:"description",INVITABILITY_LEVEL:"invitability_level",MEMBER_VIEWABILITY_LEVEL:"member_viewability_level",USER:"user",USER_ID:"user.id",GROUP:"group",GROUP_ID:"group.id",ROLE:"role"},v=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,m))}return s(t,e),a(t,[{key:"_getGroupId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.groupId||e.group_id?(o=e.groupId||e.group_id,e.groupId?delete e.groupId:delete e.group_id):e.group&&e.group.id&&(o=e.group.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getGroupMembershipId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.groupMembershipId||e.group_membership_id?(o=e.groupMembershipId||e.group_membership_id,e.groupMembershipId?delete e.groupMembershipId:delete e.group_membership_id):(e.groupMembership&&e.groupMembership.id||e.group_membership&&e.group_membership.id)&&(o=e.groupMembership.id||e.group_membership.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getGroup",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.group?(r||(0,f["default"])(e.group,o),i||(0,_["default"])(e.group,this.FLATTENED_VALUES),e.body=CreateRequestBody(e.group,this.ALL_VALUES,i),delete e.group):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"_getGroupMembership",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.groupMembership&&(e.group_membership=e.groupMembership,delete e.groupMembership),e.group_membership?(r||(0,f["default"])(e.group_membership,o),i||(0,_["default"])(e.group_membership,this.FLATTENED_VALUES),e.body=CreateRequestBody(e.group_membership,this.ALL_VALUES,i),delete e.group_membership):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getGroupId(e),r=g+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getAll",value:function(e){e=e||{};var t=""+g;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}},{key:"update",value:function(e){e=e||{};var o=this._getGroupId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getGroup(e,[],r,i)}var n=g+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"getMembership",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getGroupMembershipId(e),r=b+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"updateMembership",value:function(e){e=e||{};var o=this._getGroupMembershipId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getGroupMembership(e,[],r,i)}var n=b+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"deleteMembership",value:function(e){e=e||{};var t=this._getGroupMembershipId(e),o=b+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}},{key:"getMembershipsForGroup",value:function(e){e=e||{};var t=this._getGroupId(e),o=g+"/"+t+"/memberships";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(o,e)}},{key:"getCollaborationsForGroup",value:function(e){e=e||{};var t=this._getGroupId(e),o=g+"/"+t+"/collaborations";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(o,e)}}]),t}(y["default"]);t["default"]=v,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function O(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:O(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(6),p=r(u),c=o(7),f=(r(c),o(8)),d=(r(f),o(9)),_=(r(d),o(10)),h=r(_),y="/metadata_templates",g="/folders",b="/files",m={},v=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,m))}return s(t,e),a(t,[{key:"get",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=y+"/"+o+"/"+r+"/schema";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(i,e)}},{key:"getTemplates",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),r=y+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=g+"/"+o+"/metadata/"+r+"/"+i;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(n,e)}},{key:"getAllFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=g+"/"+o+"/metadata";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=b+"/"+o+"/metadata/"+r+"/"+i;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(n,e)}},{key:"getAllFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=b+"/"+o+"/metadata";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"createFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=g+"/"+o+"/metadata/"+r+"/"+i;return e.method=p["default"].HTTP_VERBS.POST,e.headers=e.headers||{},e.headers["Content-Type"]="application/json",this.client.makeRequest(n,e)}},{key:"createFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=b+"/"+o+"/metadata/"+r+"/"+i;return e.method=p["default"].HTTP_VERBS.POST,e.headers=e.headers||{},e.headers["Content-Type"]="application/json",this.client.makeRequest(n,e)}},{key:"updateFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=b+"/"+o+"/metadata/"+r+"/"+i;return e.method=p["default"].HTTP_VERBS.PUT,e.headers=e.headers||{},e.headers["Content-Type"]="application/json-patch+json",this.client.makeRequest(n,e)}},{key:"updateFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=g+"/"+o+"/metadata/"+r+"/"+i;return e.method=p["default"].HTTP_VERBS.PUT,e.headers=e.headers||{},e.headers["Content-Type"]="application/json-patch+json",this.client.makeRequest(n,e)}},{key:"deleteFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=g+"/"+o+"/metadata/"+r+"/"+i;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(n,e)}},{key:"deleteFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=b+"/"+o+"/metadata/"+r+"/"+i;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(n,e)}}]),t}(h["default"]);t["default"]=v,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(10),u=r(l),p=o(6),c=r(p),f="/search",d={},_=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d))}return s(t,e),a(t,[{key:"_objectifyStringWithQuery",value:function(e){if("string"==typeof e){var t=e;e={query:t}}return e}},{key:"_getQuery",value:function(e){var t="query",o="";if(!e.query&&!e.params.query)throw new Error("An "+t+" field is required for this API call. Please provide an object with a key formatted in this style: "+t);return e.params=e.params||{},o=e.query||e.params.query,e.query&&delete e.query,e.params.query=o,e}},{key:"search",value:function(e){e=this._objectifyStringWithQuery(e)||{},e=this._getQuery(e);var t=""+f;return e.method=c["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}}]),t}(u["default"]);t["default"]=_,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function T(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:T(i,t,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},u=o(6),p=r(u),c=o(7),f=r(c),d=o(8),_=r(d),h=o(9),y=r(h),g=o(10),b=r(g),m="/tasks",v="/task_assignments",O={TASK:"task",TASK_TYPE:"task.type",TASK_ID:"task.id",ASSIGN_TO:"assign_to",ASSIGN_TO_ID:"assign_to.id",ASSIGN_TO_LOGIN:"assign_to.login",RESOLUTION_STATE:"resolution_state",ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",ACTION:"action",MESSAGE:"message",DUE_AT:"due_at"},k=function(e){function t(e){i(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,O));return o.client=e,o}return s(t,e),a(t,[{key:"_getTaskId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.taskId||e.task_id?(o=e.taskId||e.task_id,e.taskId?delete e.taskId:delete e.task_id):e.task&&e.task.id&&(o=e.task.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getTaskAssignmentId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.taskAssignment&&(e.task_assignment=e.taskAssignment,delete e.taskAssignment),e.taskAssignmentId||e.task_assignment_id?(o=e.taskId||e.task_id,e.taskId?delete e.taskId:delete e.task_id):e.task_assignment&&e.task_assignment.id&&(o=e.task_assignment.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getTask",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.task?(r||(0,f["default"])(e.task,o),i||(0,y["default"])(e.task,this.FLATTENED_VALUES),e.body=(0,_["default"])(e.task,this.ALL_VALUES,i),delete e.task):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"_getTaskAssignment",value:function(e,o,r,i){r=r||this.client.skipValidation||!1,i=i||!1,e.taskAssignment&&(e.task_assignment=e.taskAssignment,delete e.taskAssignment),e.task_assignment?(r||(0,f["default"])(e.task_assignment,o),i||(0,y["default"])(e.task_assignment,this.FLATTENED_VALUES),e.body=(0,_["default"])(e.task_assignment,this.ALL_VALUES,i),delete e.task_assignment):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,i)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getTaskId(e),r=m+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[O.ITEM,O.ITEM_ID,O.ITEM_TYPE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTask(e,o,r,i)}var n=""+m;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"update",value:function(e){e=e||{};var o=this._getTaskId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTask(e,[],r,i)}var n=m+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getTaskId(e),o=m+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}},{key:"getTaskAssignment",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getTaskAssignmentId(e),r=v+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTaskAssignments",value:function(e){e=e||{};var t=this._getTaskId(e),o=m+"/"+t+"/assignments";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(o,e)}},{key:"createTaskAssignment",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[O.TASK,O.TASK_TYPE,O.TASK_ID,O.ASSIGN_TO],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTaskAssignment(e,o,r,i)}var n=""+v;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"updateTaskAssignment",value:function(e){e=e||{};var o=this._getTaskAssignmentId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTaskAssignment(e,[],r,i)}var n=v+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"deleteTaskAssignment",value:function(e){e=e||{};var t=this._getTaskAssignmentId(e),o=v+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(b["default"]);t["default"]=k,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(6),u=r(l),p=o(7),c=(r(p),o(9)),f=(r(c),o(10)),d=r(f),_="/users",h={},y=function(e){function t(e){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h))}return s(t,e),a(t,[{key:"getCurrentUser",value:function(e){e=e||{};var t=_+"/me";return e.method=u["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}},{key:"getGroupMemberships",value:function(e){e=e||{};var t=_+"/"+userId+"/memberships";return e.method=u["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}}]),t}(d["default"]);t["default"]=y,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),u=o(4),p=r(u),c=o(6),f=r(c),d=function(e){function t(e){i(this,t),e=e||{};var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._tokenExpirationTime=e.tokenExpirationTime||27e5,o.accessTokenHandler=o._checkConfigForAccessTokenHandler(e),o.accessTokenStore=o._defaultAccessTokenStore(),o.storage=e.storage||"localStorage",o.disableStorage=e.disableStorage||!1,o.isCallback=e.isCallback||!1,o.isPromise=e.isPromise||!0,o.requestRetryTimes=e.retryTimes||3,o.supportsStorage=o._storageAvailable(o.storage),o.suppressExpiration=e.suppressExpiration||!1,o}return s(t,e),l(t,[{key:"_checkConfigForAccessTokenHandler",value:function(e){if("object"===("undefined"==typeof e?"undefined":a(e))&&(e.accessTokenHandler||e.access_token_handler))return e.accessTokenObject=e.accessTokenHandler||e.access_token_handler,e.accessTokenObject;throw new Error("An accessTokenHandler is required to create a PersisentBoxClient. Please provide a callback function or promise that resolves to an access token")}},{key:"_storageAvailable",value:function(e){try{var t=window[e],o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(r){return!1}}},{key:"_verifyAccessTokenObject",value:function(e){var t={};return"string"==typeof e?(t.accessToken=e,this.suppressExpiration||(t.expiresAt=this._calculateTokenExpiration()),t):("object"===("undefined"==typeof e?"undefined":a(e))&&(e.accessToken||e.access_token)&&(t.accessToken=e.accessToken||e.access_token),"object"!==("undefined"==typeof e?"undefined":a(e))||this.suppressExpiration||!e.expiresAt&&!e.expires_at||(t.expiresAt=e.expiresAt||e.expires_at),this.suppressExpiration||t.expiresAt||(t.expiresAt=this._calculateTokenExpiration()),t)}},{key:"_calculateTokenExpiration",value:function(){return Date.now()+this._tokenExpirationTime}},{key:"_promisifyAccessTokenHandler",value:function(e){if("function"==typeof e&&this.isCallback)return new this.Promise(function(t,o){e(function(e,r){e&&o(e),r?t(r):o("Couldn't retrieve a new token.")})});if("function"==typeof e&&this.isPromise){var t=e();if("object"===("undefined"==typeof t?"undefined":a(t))&&"then"in t)return t;throw new Error("accessTokenHandler must resolve to a function or promise")}throw new Error("accessTokenHandler must resolve to a function or promise")}},{key:"_defaultAccessTokenStore",value:function(){var e=this;return this._accessToken=function(){return e.supportsStorage&&!e.disableStorage?new e.Promise(function(t,o){return e._promisifyAccessTokenHandler(e.accessTokenHandler).then(function(o){o=e._verifyAccessTokenObject(o),window[e.storage].setItem(f["default"].BOX_TOKEN_STORAGE_KEY,JSON.stringify(o)),t(o)})}):new e.Promise(function(t,o){return e._promisifyAccessTokenHandler(e.accessTokenHandler).then(function(o){o=e._verifyAccessTokenObject(o),t(o)})})},{accessToken:this._accessToken}}},{key:"_isExpired",value:function(e){var t=e.expires_at||e.expiresAt;return t<Date.now()}},{key:"retrieveToken",value:function(e){if(this.supportsStorage&&!this.disableStorage){var t=window[this.storage].getItem(f["default"].BOX_TOKEN_STORAGE_KEY);return t=t?JSON.parse(t):null,t&&!this._isExpired(t)&&0===e?new this.Promise(function(e,o){e(t)}):(window[this.storage].removeItem(f["default"].BOX_TOKEN_STORAGE_KEY),this.accessTokenStore.accessToken())}return this.accessTokenStore.accessToken()}},{key:"reauth",value:function(e,t,o){var r=this;return this.retrieveToken(o).then(function(o){var i=t.headers||{};i[f["default"].HEADER_AUTHORIZATION]="Bearer "+o.accessToken,t=t||{};var n=Object.assign({},t);return n.url=t.url||""+r._baseApiUrl+e,n.headers=i,n.params=r._applyFields(t),r._checkForEmptyObjects(n),n=r._formatOptions(n)})}},{key:"makeRequest",value:function(e,t,o){var r=this;if(o=o||0,o>this.requestRetryTimes)throw new Error("Exceeded retry count.");return this.reauth(e,t,o).then(function(i){return r._returnsOnlyOptions?(i.upload&&(i.headers["Content-Type"]=void 0,delete i.upload),i):r.httpService.defaults&&t.upload?r._handleAngularFileUpload(r.httpService,i):r.httpService.defaults&&t.chunkedUpload?r._handleAngularFileChunkedUpload(r.httpService,t):r.httpService(i)["catch"](function(i){var n=i.status||i.response.status;if(void 0===n||n<=0)return r.supportsStorage&&!r.disableStorage&&window[r.storage].removeItem(f["default"].BOX_TOKEN_STORAGE_KEY),r.makeRequest(e,t,o+1);throw i})})}}]),t}(p["default"]);t["default"]=d,e.exports=t["default"]}])});
//# sourceMappingURL=BoxSdk.map